# 목차
> 1. 컨테이너 서비스란?
2. 왜 도커 컨테이너 서비스일까?

---
분야를 막론하고 개발을 하다보면 반드시 **도커**라는 서비스를 듣게된다.

쉽게 정리하면,
> "도커는 기존 가상머신(VM)이 운영체제(OS)까지 포함하여 가상화하는 것과 달리, 호스트 OS의 커널을 공유하면서 애플리케이션이 실행되는 데 필요한 패키지와 라이브러리를 하나의 컨테이너에 담아 배포하고 관리할 수 있는 경량화된 가상화 기술이다."

늘 그렇듯 비유로만 개념을 이해하면 사고가 거기서 멈추고 구체적으로 어떤 기능을 수행하는지 도저히 가늠할 수가 없는 것 같다.

따라서 이를 정리하여 포스팅해 개념을 확실히 쌓아두고자 한다.

---
# 컨테이너 서비스
흔히 우리가 알고 있는 컨테이너는 배에 여러 가지 물건을 실을 수 있는 네모난 화물 수송용 박스다.

그런데 왜 IT에서 이 용어를 사용할까?
컨테이너를 사전적으로 해석해 보면
> "어떤 사물을 격리할 수 있는 공간" 을 뜻한다.

이를 IT에 접목시켜 보면, 컨테이너에 우리가 **서비스하고자 하는 애플리케이션 코드와 프로세스를 격리한다**는 의미로 해석할 수 있다.

최근 들어 클라우드 기반의 컨테이너 서비스, 데브옵스, MSA 아키텍처라는 단어는 데이터 기반의 애플리케이션 프로젝트에서 빠지지 않고, 특히 MSA는 현재 백엔드 분야에 밥줄이다.

컨테이너 기술은 최신 기술이 아니다. 1991년 처음 소개된 리눅스의 내장된 컨테이너 LXC(Linux Container) 기술을 이어받아 2013년 닷 클라우드 엔지니어의 도커 발표로 시작되어 현재의 컨테이너 가상화 기술 표준이 되었다.

❓이렇듯 애플리케이션 개발환경이 도커 기반의 컨테이너 서비스 환경으로 전환된 이유는 무엇일까?

대부분 개발자가 개발, 테스트, 배포, 운영의 컴퓨팅 환경 차이로 인한 시행착오 및 다양한 오류 해결에 너무 많은 시간을 쏟는 공통적인 문제를 겪고 있다.

바로 **가변적 인프라 환경으로 인한 일관성 없는 환경 제공** 때문이다.

컨테이너 서비스는 기존 환경과 다르게 애플리케이션 실행에 필요한 바이너리, 라이브러리 및 구성 파일 등을 패키지로 묶어 배포하는 방식으로, 논리적 패키징 메커니즘을 제공한다.

🚀애플리케이션이 가지고 있는 운영체제, 하드웨어에 대한 의존성 문제를 해결한 것이다.

따라서 어떤 환경에서든 컨테이너 기반의 애플리케이션을 개발하고 배포할 수 있다.

> 이렇게 호스트 운영체제를 공유하고 애플리케이션에 필요한 환경을 패키징하는 것을 **운영체제 레벨 가상화** 라고 부른다.

일반적으로 가상화 방식은 크게 두 가지로 구분된다.

### 하드웨어 레벨 가상화
- 하이퍼바이저 등을 이용한 `가상머신` 방식

### 운영체제 레벨 가상화
- 컨테이너 기반의 `애플리케이션` 서비스 방식

💡컨테이너화를 통해 개발자는 애플리케이션 개발에 집중하고, IT 부서는 소프트웨어의 버전과 패치 등 애플리케이션 `운영`에 필요한 세부적인 것을 관리하여 낭비되는 시간을 없애고 각자의 업무에 집중할 수 있게 되었다.

---
# 왜 도커 컨테이너 서비스일까?
도커를 도입하려고 할 때 분명 번거로움을 느끼거나 굳이 🤔왜 라는 의문을 갖을 수 있다.

기존 온프레미스(물리 서버를 직접 회사 내부에서 관리하는 것) 서버 환경을 운용 중인 회사의 CTO들도 도커 환경으로 이전하는 것을 고민하는 사례가 많다고 한다.

## 도커 기반 애플리케이션 개발의 라이프 사이클
![](https://velog.velcdn.com/images/alstjr971/post/5d8a7d35-c2d2-4f1e-bf50-7f9c1e83dc0e/image.png)

### 1. 애플리케이션 코드 개발
- 특정 서비스 구동을 위한 애플리케이션 코드 및 웹 화면 구성 등을 위한 코드 개발
- 일반적으로 `코딩`하면 생각하는 그 과정이다.

### 2. 베이스 이미지를 이용한 Dockerfile 작성
- 개발에 필요한 인프라 구성 요소를 Dockerfile이라는 파일에 작성한다.
- 도커 허브를 통해 베이스 이미지를 다운로드하고 다양한 구동 명령어(FROM,RUN,CMD..)와 1번 과정에서 작성한 Application 코드, 라이브러리, 여러 도구를 포함
- **개발 환경에 필요한 모든 요소들을 파일에 정의하는 과정**

### 3. Dockerfild build를 통한 새로운 이미지 생성
- docker  build 명령을 통해 작성한 Dockerfile을 실행
- Gradle Biuld와 유사한 작업

### 4-1. 생성된 이미지를 이용한 컨테이너 실행
- 이미지를 이용해 여러 개의 `컨테이너`를 구동

### 4-2. 도커 컴포즈를 이용한 다중 컨테이너 실행
- 도커 실행 옵션을 미리 정의한 `docker-compose.yml` 을 통해 컨테이너 통합 관리

### 5-1. 컨테이너 애플리케이션 서비스 테스트
- Ex) Nginx 를 이용한 웹 애플리케이션 컨테이너 서비스라면, 연결하는 IP와 포트 번호를 이용하여 웹 브라우저를 이용한 페이지 연결 확인

### 5-2. 마이크로서비스(MSA) 테스트
- 5-1과 마찬가지로 해당 서비스에 대한 테스트 진행

### 6. 로컬 및 원격 저장소에 이미지 저장
- 로컬(도커 서버 or private 레지스트리) 및 원격(도커 허브)에 있는 이미지 저장소(repository)에 생성한 이미지를 저장(push)
- Github 원격 repository에 push 하는 것과 유사
- 팀 간 공유 및 지속 관리

### 7. 깃허브 등을 활용한 Dockerfile 관리
- Dockerfile 코드를 깃허브 사이트에 저장 및 관리
- 도커 허브 사이트와 연동하면 자동 빌드를 이용한 이미지 생성도 가능

### 8. 동일 환경에서의 지속적 애플리케이션 개발 수행
- 1~7번 과정을 통해 업무용 애플리케이션 이미지를 지속적으로 개발, 운영 관리 가능


---
📌 도커 작동 과정에서 눈여겨볼 것은 컨테이너 동작에 필요한 모든 내용을 사전에 `코드로 작성` 하여 앤서블, 셰프, 베이그런트, 퍼핏과 같은 인프라 `프로비저닝` 도구로 자동화하게 되면 기업이 필요할 때마다 애플리케이션 및 서버 환경을 적은 비용으로 빠르게 개발, 배포, 확장할 수 있다는 것이다.

> 이러한 개념을 IaC(Infrastucture as Code) 라고 한다.

이 기능을 통해 개발자는 애플리케이션 개발, 테스트, 배포 시마다 모든 인프라 구성 요소를 하나하나 수도으로 체크할 필요가 없고, **변경 불가능한 인프라** 환경에서 언제든 동일한 상태에서의 개발이 가능해진다.

하루에 수 천개의 애플리케이션을 올리고 내리는 구글에서 이러한 작업을 수동으로 하게 된다면 얼마나 많은 인력과 시간이 소요될지 상상조차 안된다.
이처럼, 수많은 소프트웨어와 애플리케이션을 민첩하고 탄력적으로 제공하려는 기업이라면 필수적으로 구성해야 하는 것이 바로 **도커 컨테이너 서비스 환경**이다.
